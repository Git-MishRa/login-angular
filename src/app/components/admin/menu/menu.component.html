<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<div class="container mt-2">
  <h2 class="mb-2">Admin Menu Management </h2>
  <button class="btn btn-primary mb-2" (click)="isFormDisabled()">Add Menu</button>
  <ul class="list-group mb-4">
    <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let menu of menus">
      <span><b>Title:</b> {{ menu.title }} | <b>Url:</b> {{ menu.url }} | <b>Active:</b> {{ menu.isActive ? 'Active' : 'Inactive' }} | <b>Updated On:</b> {{menu.updatedOn.slice(0,10)}} | <b>Updated By:</b> {{menu.updatedBy}}</span>
      <div>
        <button class="btn btn-primary btn-sm mr-4" (click)="onEdit(menu)">Edit</button>
        <span class="mx-1"></span>
        <button class="btn btn-danger btn-sm mr-3" (click)="onDelete(menu.id)">Delete</button>
      </div>
    </li>
  </ul>
  <div class="container mr-5 ml-5">
  <form [formGroup]="menuForm" (ngSubmit)="onSubmit()" [hidden]="formDisabled">
    <div class="form-group">
      <label for="title">Title:</label>
      <input id="title" formControlName="title" type="text" class="form-control" maxlength="15" required>
      <div *ngIf="menuForm.get('title')?.errors" class="text-danger">
        <small *ngIf="menuForm.get('title')?.untouched">Title is required.</small>
    </div>
    </div>

    <div class="form-group">
      <label for="url">URL:</label>
      <input id="url" formControlName="url" type="text" class="form-control" maxlength="15" required>
      <div *ngIf="menuForm.get('url')?.errors" class="text-danger">
        <small *ngIf="menuForm.get('url')?.untouched">Path is required.</small>
        <small *ngIf="menuForm.get('url')?.validator">Path cannot be more than 15 characters.</small>
      </div>
    </div>
    <div class="form-group form-check">
      <input id="isActive" formControlName="isActive" type="checkbox" class="form-check-input">
      <label for="isActive" class="form-check-label mb-2">Active</label>
    </div>
    <button type="submit" class="btn btn-success px-2"  [disabled]="menuForm.invalid">{{ editMode ? 'Update' : 'Add' }} Menu</button>
    <span class="mx-2"></span>
    <button type="button" class="btn btn-secondary ml-2" (click)="resetForm()">Cancel</button>
  </form>
  </div>
  <div class ="mt-2">
    <h2 class="mb-2">Active Menus</h2>
  </div>
  <ul class="list-group mb-4">
    <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let m of activeMenus">
      <span><b>Title:</b> {{ m.title }} | <b>Url:</b> <a href="{{m.url}}">{{ m.url }}</a> </span>
    </li>
  </ul>
</div>