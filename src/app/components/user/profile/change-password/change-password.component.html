<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="">
      <div class="card">
        <div class="card-header text-center">
          <h5 class="card-title">Change Password</h5>
        </div>
        <div class="card-body">
          <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
            <div class="form-group mb-3">
              <label for="oldPassword">Current Password</label>
              <input type="password" id="oldPassword" formControlName="oldPassword" class="form-control"
                     [ngClass]="{'is-invalid': passwordForm.get('oldPassword')?.touched && passwordForm.get('oldPassword')?.invalid}">
              <div *ngIf="passwordForm.get('oldPassword')?.touched && passwordForm.get('oldPassword')?.hasError('required')" class="invalid-feedback">
                Current Password is required.
              </div>
            </div>

            <div class="form-group mb-3">
              <label for="newPassword">New Password</label>
              <input type="password" id="newPassword" formControlName="newPassword" class="form-control"
                     [ngClass]="{'is-invalid': passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.invalid}">
              <div *ngIf="passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.hasError('required')" class="invalid-feedback">
                New Password is required.
              </div>
              <div *ngIf="passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.hasError('minlength')" class="invalid-feedback">
                New Password must be at least 8 characters long.
              </div>
              <div *ngIf="passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.hasError('strongPassword')" class="invalid-feedback">
                Password must include uppercase and lowercase letters, a number, and a special character.
              </div>
            </div>

            <div class="form-group mb-3">
              <label for="confirmPassword">Confirm Password</label>
              <input type="password" id="confirmPassword" formControlName="confirmPassword" class="form-control"
                     [ngClass]="{'is-invalid': passwordForm.get('confirmPassword')?.touched && passwordForm.get('confirmPassword')?.invalid || passwordForm.hasError('mismatch')}">
              <div *ngIf="passwordForm.get('confirmPassword')?.touched && passwordForm.get('confirmPassword')?.hasError('required')" class="invalid-feedback">
                Confirm Password is required.
              </div>
              <div *ngIf="passwordForm.get('confirmPassword')?.touched && passwordForm.hasError('mismatch')" class="invalid-feedback">
                Passwords don't match.
              </div>
            </div>

            <button type="submit" class="btn btn-primary w-100">Change Password</button>
          </form>
          <div *ngIf="successMessage" class="alert alert-success mt-3">{{ successMessage }}</div>
          <div *ngIf="errorMessage" class="alert alert-danger mt-3">{{ errorMessage }}</div>
        </div>
      </div>
    </div>
  </div>
</div>
